import{g as re,r as l,w as q,t as ee,K as I,L as pe,h as L,j as a,p as O,z as V,q as R,M as ie,v as Ne,E as ue,N as ze,O as Ue,Q as Ke,C as Ie,U as Ve,o as He,R as te,V as K,B as G,H as W,T as M,S as ce,a as De}from"./index-CUg0-SY9.js";import{B as ge}from"./badge-CkbhpIJr.js";import{t as $e,v as Ge,F as We}from"./form-label-XLkUq_EI.js";import{a as qe,b as Je,u as Qe,F as Xe}from"./use-toast-DzNVGxy_.js";import{H as Re}from"./h-stack-gT0jPa0C.js";import{S as ye,a as Se,b as Ce}from"./stat-number-rzi2SSZi.js";function Ye(s){const{wasSelected:t,enabled:e,isSelected:n,mode:o="unmount"}=s;return!!(!e||n||o==="keepMounted"&&t)}function Ze(s,t){const e={},n={};for(const[o,r]of Object.entries(s))t.includes(o)?e[o]=r:n[o]=r;return[e,n]}function et(s){const{value:t,defaultValue:e,onChange:n,shouldUpdate:o=(b,m)=>b!==m}=s,r=re(n),i=re(o),[u,f]=l.useState(e),c=t!==void 0,h=c?t:u,y=re(b=>{const P=typeof b=="function"?b(h):b;i(h,P)&&(c||f(P),r(P))},[c,r,h,i]);return[h,y]}function ke(s){return s.sort((t,e)=>{const n=t.compareDocumentPosition(e);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const tt=s=>typeof s=="object"&&"nodeType"in s&&s.nodeType===Node.ELEMENT_NODE;function Te(s,t,e){let n=s+1;return e&&n>=t&&(n=0),n}function ve(s,t,e){let n=s-1;return e&&n<0&&(n=t),n}const le=typeof window<"u"?l.useLayoutEffect:l.useEffect,Pe=s=>s;var st=Object.defineProperty,nt=(s,t,e)=>t in s?st(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,v=(s,t,e)=>(nt(s,typeof t!="symbol"?t+"":t,e),e);class at{constructor(){v(this,"descendants",new Map),v(this,"register",t=>{if(t!=null)return tt(t)?this.registerNode(t):e=>{this.registerNode(e,t)}}),v(this,"unregister",t=>{this.descendants.delete(t);const e=ke(Array.from(this.descendants.keys()));this.assignIndex(e)}),v(this,"destroy",()=>{this.descendants.clear()}),v(this,"assignIndex",t=>{this.descendants.forEach(e=>{const n=t.indexOf(e.node);e.index=n,e.node.dataset.index=e.index.toString()})}),v(this,"count",()=>this.descendants.size),v(this,"enabledCount",()=>this.enabledValues().length),v(this,"values",()=>Array.from(this.descendants.values()).sort((e,n)=>e.index-n.index)),v(this,"enabledValues",()=>this.values().filter(t=>!t.disabled)),v(this,"item",t=>{if(this.count()!==0)return this.values()[t]}),v(this,"enabledItem",t=>{if(this.enabledCount()!==0)return this.enabledValues()[t]}),v(this,"first",()=>this.item(0)),v(this,"firstEnabled",()=>this.enabledItem(0)),v(this,"last",()=>this.item(this.descendants.size-1)),v(this,"lastEnabled",()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)}),v(this,"indexOf",t=>{var e;return t?((e=this.descendants.get(t))==null?void 0:e.index)??-1:-1}),v(this,"enabledIndexOf",t=>t==null?-1:this.enabledValues().findIndex(e=>e.node.isSameNode(t))),v(this,"next",(t,e=!0)=>{const n=Te(t,this.count(),e);return this.item(n)}),v(this,"nextEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const o=this.enabledIndexOf(n.node),r=Te(o,this.enabledCount(),e);return this.enabledItem(r)}),v(this,"prev",(t,e=!0)=>{const n=ve(t,this.count()-1,e);return this.item(n)}),v(this,"prevEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const o=this.enabledIndexOf(n.node),r=ve(o,this.enabledCount()-1,e);return this.enabledItem(r)}),v(this,"registerNode",(t,e)=>{if(!t||this.descendants.has(t))return;const n=Array.from(this.descendants.keys()).concat(t),o=ke(n);e!=null&&e.disabled&&(e.disabled=!!e.disabled);const r={node:t,index:-1,...e};this.descendants.set(t,r),this.assignIndex(o)})}}function ot(){const[s,t]=q({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});return[s,t,()=>{const o=l.useRef(new at);return le(()=>()=>o.current.destroy()),o.current},o=>{const r=t(),[i,u]=l.useState(-1),f=l.useRef(null);le(()=>()=>{f.current&&r.unregister(f.current)},[]),le(()=>{if(!f.current)return;const h=Number(f.current.dataset.index);i!=h&&!Number.isNaN(h)&&u(h)});const c=Pe(o?r.register(o):r.register);return{descendants:r,index:i,enabledIndex:r.enabledIndexOf(f.current),register:ee(c,f)}}]}function rt(){const s=l.useRef(new Map),t=s.current,e=l.useCallback((o,r,i,u)=>{s.current.set(i,{type:r,el:o,options:u}),o.addEventListener(r,i,u)},[]),n=l.useCallback((o,r,i,u)=>{o.removeEventListener(r,i,u),s.current.delete(i)},[]);return l.useEffect(()=>()=>{t.forEach((o,r)=>{n(o.el,o.type,r,o.options)})},[n,t]),{add:e,remove:n}}function de(s){var o,r;const t=((r=(o=s.composedPath)==null?void 0:o.call(s))==null?void 0:r[0])??s.target,{tagName:e,isContentEditable:n}=t;return e!=="INPUT"&&e!=="TEXTAREA"&&n!==!0}function it(s={}){const{ref:t,isDisabled:e,isFocusable:n,clickOnEnter:o=!0,clickOnSpace:r=!0,onMouseDown:i,onMouseUp:u,onClick:f,onKeyDown:c,onKeyUp:h,tabIndex:y,onMouseOver:b,onMouseLeave:m,...P}=s,[T,k]=l.useState(!0),[N,x]=l.useState(!1),S=rt(),E=d=>{d&&d.tagName!=="BUTTON"&&k(!1)},g=T?y:y||0,C=e&&!n,D=l.useCallback(d=>{if(e){d.stopPropagation(),d.preventDefault();return}d.currentTarget.focus(),f==null||f(d)},[e,f]),j=l.useCallback(d=>{N&&de(d)&&(d.preventDefault(),d.stopPropagation(),x(!1),S.remove(document,"keyup",j,!1))},[N,S]),B=l.useCallback(d=>{if(c==null||c(d),e||d.defaultPrevented||d.metaKey||!de(d.nativeEvent)||T)return;const _=o&&d.key==="Enter";r&&d.key===" "&&(d.preventDefault(),x(!0)),_&&(d.preventDefault(),d.currentTarget.click()),S.add(document,"keyup",j,!1)},[e,T,c,o,r,S,j]),H=l.useCallback(d=>{if(h==null||h(d),e||d.defaultPrevented||d.metaKey||!de(d.nativeEvent)||T)return;r&&d.key===" "&&(d.preventDefault(),x(!1),d.currentTarget.click())},[r,T,e,h]),A=l.useCallback(d=>{d.button===0&&(x(!1),S.remove(document,"mouseup",A,!1))},[S]),$=l.useCallback(d=>{if(d.button!==0)return;if(e){d.stopPropagation(),d.preventDefault();return}T||x(!0),d.currentTarget.focus({preventScroll:!0}),S.add(document,"mouseup",A,!1),i==null||i(d)},[e,T,i,S,A]),z=l.useCallback(d=>{d.button===0&&(T||x(!1),u==null||u(d))},[u,T]),F=l.useCallback(d=>{if(e){d.preventDefault();return}b==null||b(d)},[e,b]),ae=l.useCallback(d=>{N&&(d.preventDefault(),x(!1)),m==null||m(d)},[N,m]),J=ee(t,E);return T?{...P,ref:J,type:"button","aria-disabled":C?void 0:e,disabled:C,onClick:D,onMouseDown:i,onMouseUp:u,onKeyUp:h,onKeyDown:c,onMouseOver:b,onMouseLeave:m}:{...P,ref:J,role:"button","data-active":I(N),"aria-disabled":e?"true":void 0,tabIndex:C?void 0:g,onClick:D,onMouseDown:$,onMouseUp:z,onKeyUp:H,onKeyDown:B,onMouseOver:F,onMouseLeave:ae}}function ct(s){return s&&pe(s)&&pe(s.target)}function lt(s={}){const{onChange:t,value:e,defaultValue:n,name:o,isDisabled:r,isFocusable:i,isNative:u,...f}=s,[c,h]=l.useState(n||""),y=typeof e<"u",b=y?e:c,m=l.useRef(null),P=l.useCallback(()=>{const g=m.current;if(!g)return;let C="input:not(:disabled):checked";const D=g.querySelector(C);if(D){D.focus();return}C="input:not(:disabled)";const j=g.querySelector(C);j==null||j.focus()},[]),k=`radio-${l.useId()}`,N=o||k,x=l.useCallback(g=>{const C=ct(g)?g.target.value:g;y||h(C),t==null||t(String(C))},[t,y]),S=l.useCallback((g={},C=null)=>({...g,ref:ee(C,m),role:"radiogroup"}),[]),E=l.useCallback((g={},C=null)=>({...g,ref:C,name:N,[u?"checked":"isChecked"]:b!=null?g.value===b:void 0,onChange(j){x(j)},"data-radiogroup":!0}),[u,N,x,b]);return{getRootProps:S,getRadioProps:E,name:N,ref:m,focus:P,setValue:h,value:b,onChange:x,isDisabled:r,isFocusable:i,htmlProps:f}}const[dt,_e]=q({name:"RadioGroupContext",strict:!1}),X=L((s,t)=>{const{colorScheme:e,size:n,variant:o,children:r,className:i,isDisabled:u,isFocusable:f,...c}=s,{value:h,onChange:y,getRootProps:b,name:m,htmlProps:P}=lt(c),T=l.useMemo(()=>({name:m,size:n,onChange:y,colorScheme:e,value:h,variant:o,isDisabled:u,isFocusable:f}),[m,n,y,e,h,o,u,f]);return a.jsx(dt,{value:T,children:a.jsx(O.div,{...b(P,t),className:V("chakra-radio-group",i),children:r})})});X.displayName="RadioGroup";function ut(s={}){const{defaultChecked:t,isChecked:e,isFocusable:n,isDisabled:o,isReadOnly:r,isRequired:i,onChange:u,isInvalid:f,name:c,value:h,id:y,"data-radiogroup":b,"aria-describedby":m,...P}=s,T=`radio-${l.useId()}`,k=qe(),x=!!_e()||!!b;let E=!!k&&!x?k.id:T;E=y??E;const g=o??(k==null?void 0:k.isDisabled),C=r??(k==null?void 0:k.isReadOnly),D=i??(k==null?void 0:k.isRequired),j=f??(k==null?void 0:k.isInvalid),[B,H]=l.useState(!1),[A,$]=l.useState(!1),[z,F]=l.useState(!1),[ae,J]=l.useState(!!t),d=typeof e<"u",_=d?e:ae,Q=l.useRef(!1);l.useEffect(()=>$e(p=>{Q.current=p}),[]);const oe=l.useCallback(p=>{if(C||g){p.preventDefault();return}d||J(p.currentTarget.checked),u==null||u(p)},[d,g,C,u]),he=l.useCallback(p=>{p.key===" "&&F(!0)},[F]),fe=l.useCallback(p=>{p.key===" "&&F(!1)},[F]),Fe=l.useCallback((p={},U=null)=>({...p,ref:U,"data-active":I(z),"data-hover":I(A),"data-disabled":I(g),"data-invalid":I(j),"data-checked":I(_),"data-focus":I(B),"data-focus-visible":I(B&&Q.current),"data-readonly":I(C),"aria-hidden":!0,onMouseDown:R(p.onMouseDown,()=>F(!0)),onMouseUp:R(p.onMouseUp,()=>F(!1)),onMouseEnter:R(p.onMouseEnter,()=>$(!0)),onMouseLeave:R(p.onMouseLeave,()=>$(!1))}),[z,A,g,j,_,B,C]),{onFocus:be,onBlur:me}=k??{},Le=l.useCallback((p={},U=null)=>{const xe=g&&!n;return{...p,id:E,ref:U,type:"radio",name:c,value:h,onChange:R(p.onChange,oe),onBlur:R(me,p.onBlur,()=>H(!1)),onFocus:R(be,p.onFocus,()=>H(!0)),onKeyDown:R(p.onKeyDown,he),onKeyUp:R(p.onKeyUp,fe),checked:_,disabled:xe,readOnly:C,required:D,"aria-invalid":ie(j),"aria-disabled":ie(xe),"aria-required":ie(D),"data-readonly":I(C),"aria-describedby":m,style:Ge}},[g,n,E,c,h,oe,me,be,he,fe,_,C,D,j,m]);return{state:{isInvalid:j,isFocused:B,isChecked:_,isActive:z,isHovered:A,isDisabled:g,isReadOnly:C,isRequired:D},getRadioProps:Fe,getInputProps:Le,getLabelProps:(p={},U=null)=>({...p,ref:U,onMouseDown:R(p.onMouseDown,ht),"data-disabled":I(g),"data-checked":I(_),"data-invalid":I(j)}),getRootProps:(p,U=null)=>({htmlFor:E,...p,ref:U,"data-disabled":I(g),"data-checked":I(_),"data-invalid":I(j)}),htmlProps:P}}function ht(s){s.preventDefault(),s.stopPropagation()}const w=L((s,t)=>{const e=_e(),{onChange:n,value:o}=s,r=Ne("Radio",{...e,...s}),i=ue(s),{spacing:u="0.5rem",children:f,isDisabled:c=e==null?void 0:e.isDisabled,isFocusable:h=e==null?void 0:e.isFocusable,inputProps:y,...b}=i;let m=s.isChecked;(e==null?void 0:e.value)!=null&&o!=null&&(m=e.value===o);let P=n;e!=null&&e.onChange&&o!=null&&(P=ze(e.onChange,n));const T=(s==null?void 0:s.name)??(e==null?void 0:e.name),{getInputProps:k,getRadioProps:N,getLabelProps:x,getRootProps:S,htmlProps:E}=ut({...b,isChecked:m,isFocusable:h,isDisabled:c,onChange:P,name:T}),[g,C]=Ze(E,Ue),D=N(C),j=k(y,t),B=x(),H=Object.assign({},g,S()),A={display:"inline-flex",alignItems:"center",verticalAlign:"top",cursor:"pointer",position:"relative",...r.container},$={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,...r.control},z={userSelect:"none",marginStart:u,...r.label};return a.jsxs(O.label,{className:"chakra-radio",...H,__css:A,children:[a.jsx("input",{className:"chakra-radio__input",...j}),a.jsx(O.span,{className:"chakra-radio__control",...D,__css:$}),f&&a.jsx(O.span,{className:"chakra-radio__label",...B,__css:z,children:f})]})});w.displayName="Radio";const[ft,bt,mt,xt]=ot();function pt(s){const{defaultIndex:t,onChange:e,index:n,isManual:o,isLazy:r,lazyBehavior:i="unmount",orientation:u="horizontal",direction:f="ltr",...c}=s,[h,y]=l.useState(t??0),[b,m]=et({defaultValue:t??0,value:n,onChange:e});l.useEffect(()=>{n!=null&&y(n)},[n]);const P=mt(),T=l.useId();return{id:`tabs-${s.id??T}`,selectedIndex:b,focusedIndex:h,setSelectedIndex:m,setFocusedIndex:y,isManual:o,isLazy:r,lazyBehavior:i,orientation:u,descendants:P,direction:f,htmlProps:c}}const[gt,se]=q({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function yt(s){const{focusedIndex:t,orientation:e,direction:n}=se(),o=bt(),r=l.useCallback(i=>{const u=()=>{var S;const x=o.nextEnabled(t);x&&((S=x.node)==null||S.focus())},f=()=>{var S;const x=o.prevEnabled(t);x&&((S=x.node)==null||S.focus())},c=()=>{var S;const x=o.firstEnabled();x&&((S=x.node)==null||S.focus())},h=()=>{var S;const x=o.lastEnabled();x&&((S=x.node)==null||S.focus())},y=e==="horizontal",b=e==="vertical",m=i.key,P=n==="ltr"?"ArrowLeft":"ArrowRight",T=n==="ltr"?"ArrowRight":"ArrowLeft",N={[P]:()=>y&&f(),[T]:()=>y&&u(),ArrowDown:()=>b&&u(),ArrowUp:()=>b&&f(),Home:c,End:h}[m];N&&(i.preventDefault(),N(i))},[o,t,e,n]);return{...s,role:"tablist","aria-orientation":e,onKeyDown:R(s.onKeyDown,r)}}function St(s){const{isDisabled:t=!1,isFocusable:e=!1,...n}=s,{setSelectedIndex:o,isManual:r,id:i,setFocusedIndex:u,selectedIndex:f}=se(),{index:c,register:h}=xt({disabled:t&&!e}),y=c===f,b=()=>{o(c)},m=()=>{u(c),!r&&!(t&&e)&&o(c)};return{...it({...n,ref:ee(h,s.ref),isDisabled:t,isFocusable:e,onClick:R(s.onClick,b)}),id:Ee(i,c),role:"tab",tabIndex:y?0:-1,type:"button","aria-selected":y,"aria-controls":Me(i,c),onFocus:t?void 0:R(s.onFocus,m)}}const[Ct,kt]=q({});function Tt(s){const t=se(),{id:e,selectedIndex:n}=t,r=Ke(s.children).map((i,u)=>l.createElement(Ct,{key:i.key??u,value:{isSelected:u===n,id:Me(e,u),tabId:Ee(e,u),selectedIndex:n}},i));return{...s,children:r}}function vt(s){const{children:t,...e}=s,{isLazy:n,lazyBehavior:o}=se(),{isSelected:r,id:i,tabId:u}=kt(),f=l.useRef(!1);r&&(f.current=!0);const c=Ye({wasSelected:f.current,isSelected:r,enabled:n,mode:o});return{tabIndex:0,...e,children:c?t:null,role:"tabpanel","aria-labelledby":u,hidden:!r,id:i}}function Ee(s,t){return`${s}--tab-${t}`}function Me(s,t){return`${s}--tabpanel-${t}`}const[Pt,ne]=q({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),we=L(function(t,e){const n=Ne("Tabs",t),{children:o,className:r,...i}=ue(t),{htmlProps:u,descendants:f,...c}=pt(i),h=l.useMemo(()=>c,[c]),{isFitted:y,...b}=u,m={position:"relative",...n.root};return a.jsx(ft,{value:f,children:a.jsx(gt,{value:h,children:a.jsx(Pt,{value:n,children:a.jsx(O.div,{className:V("chakra-tabs",r),ref:e,...b,__css:m,children:o})})})})});we.displayName="Tabs";const Y=L(function(t,e){const n=ne(),o=St({...t,ref:e}),r=Ie({outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...n.tab});return a.jsx(O.button,{...o,className:V("chakra-tabs__tab",t.className),__css:r})});Y.displayName="Tab";const Oe=L(function(t,e){const n=yt({...t,ref:e}),o=ne(),r=Ie({display:"flex",...o.tablist});return a.jsx(O.div,{...n,className:V("chakra-tabs__tablist",t.className),__css:r})});Oe.displayName="TabList";const Z=L(function(t,e){const n=vt({...t,ref:e}),o=ne();return a.jsx(O.div,{outline:"0",...n,className:V("chakra-tabs__tab-panel",t.className),__css:o.tabpanel})});Z.displayName="TabPanel";const Ae=L(function(t,e){const n=Tt(t),o=ne();return a.jsx(O.div,{...n,width:"100%",ref:e,className:V("chakra-tabs__tab-panels",t.className),__css:o.tabpanels})});Ae.displayName="TabPanels";const jt=["h","minH","height","minHeight"],Be=L((s,t)=>{const e=Ve("Textarea",s),{className:n,rows:o,...r}=ue(s),i=Je(r),u=o?He(e,jt):e;return a.jsx(O.textarea,{ref:t,rows:o,...i,className:V("chakra-textarea",n),__css:u})});Be.displayName="Textarea";const Nt=({questions:s,onComplete:t})=>{const[e,n]=l.useState("partial"),[o,r]=l.useState("partial"),[i,u]=l.useState("partial"),f=()=>{const c={fail:40,partial:70,success:95},h=Math.round((c[e]+c[o]+c[i])/3);t(h)};return a.jsxs(K,{spacing:5,align:"stretch",children:[a.jsxs(G,{children:[a.jsx(W,{size:"md",mb:2,children:"注意力测试"}),s.attention.map(c=>a.jsxs(K,{align:"stretch",spacing:3,bg:"gray.50",p:4,rounded:"md",children:[a.jsx(M,{fontWeight:"medium",children:c.instruction}),a.jsxs(ge,{colorScheme:"purple",children:["序列：",c.sequence]}),a.jsxs(M,{fontSize:"sm",color:"gray.600",children:["限时 ",c.timeLimit," 秒"]}),a.jsx(X,{value:e,onChange:n,children:a.jsxs(ce,{direction:"row",spacing:4,children:[a.jsx(w,{value:"fail",children:"未完成"}),a.jsx(w,{value:"partial",children:"部分完成"}),a.jsx(w,{value:"success",children:"完全正确"})]})})]},c.id))]}),a.jsxs(G,{children:[a.jsx(W,{size:"md",mb:2,children:"记忆测试"}),s.memory.map(c=>a.jsxs(K,{align:"stretch",spacing:3,bg:"gray.50",p:4,rounded:"md",children:[a.jsx(M,{fontWeight:"medium",children:c.instruction}),a.jsx(Re,{spacing:2,wrap:"wrap",children:c.words.map(h=>a.jsx(ge,{colorScheme:"blue",children:h},h))}),a.jsxs(M,{fontSize:"sm",color:"gray.600",children:["展示 ",c.displayTime," 秒，延迟 ",Math.round(c.recallDelay/60)," 分钟"]}),a.jsx(X,{value:o,onChange:r,children:a.jsxs(ce,{direction:"row",spacing:4,children:[a.jsx(w,{value:"fail",children:"未记住"}),a.jsx(w,{value:"partial",children:"记住部分"}),a.jsx(w,{value:"success",children:"全部记住"})]})})]},c.id))]}),a.jsxs(G,{children:[a.jsx(W,{size:"md",mb:2,children:"语言功能"}),s.language.map(c=>a.jsxs(K,{align:"stretch",spacing:3,bg:"gray.50",p:4,rounded:"md",children:[a.jsx(M,{fontWeight:"medium",children:c.instruction}),a.jsxs(M,{fontSize:"sm",color:"gray.600",children:["正确答案：",c.correctAnswer]}),a.jsx(X,{value:i,onChange:u,children:a.jsxs(ce,{direction:"row",spacing:4,children:[a.jsx(w,{value:"fail",children:"未命中"}),a.jsx(w,{value:"partial",children:"提示后完成"}),a.jsx(w,{value:"success",children:"一次成功"})]})})]},c.id))]}),a.jsx(De,{colorScheme:"blue",onClick:f,children:"记录本次 RBANS 结果"})]})},It=te.memo(Nt),Dt=({questions:s,onComplete:t})=>{const[e,n]=l.useState(""),o=Qe(),r=()=>{const i=e.trim().length>0?90:60;t(i,e),o({title:"已记录 RBMT 评估",description:`分数估计：${i}`,status:"success",duration:2e3}),n("")};return a.jsxs(K,{spacing:4,align:"stretch",children:[s.map(i=>a.jsxs(G,{bg:"gray.50",p:4,rounded:"md",children:[a.jsx(W,{size:"sm",mb:2,children:"日常记忆任务"}),a.jsx(M,{fontSize:"sm",color:"gray.600",children:i.instruction}),a.jsxs(M,{fontSize:"xs",color:"gray.500",mt:2,children:["评估时间：",Math.round(i.checkTime/60)," 分钟后"]})]},i.id)),a.jsxs(Xe,{children:[a.jsx(We,{fontSize:"sm",children:"评估记录"}),a.jsx(Be,{placeholder:"记录受试者的表现、提示语和回忆情况",value:e,onChange:i=>n(i.target.value),rows:4})]}),a.jsx(De,{colorScheme:"blue",onClick:r,children:"保存 RBMT 评估"})]})},Rt=te.memo(Dt),_t=({rbansScore:s,rbmtScore:t,notes:e})=>a.jsxs(K,{spacing:4,align:"stretch",children:[a.jsxs(Re,{spacing:4,align:"stretch",children:[a.jsxs(ye,{bg:"gray.50",p:4,rounded:"md",children:[a.jsx(Se,{children:"RBANS 综合得分"}),a.jsx(Ce,{children:s??"--"})]}),a.jsxs(ye,{bg:"gray.50",p:4,rounded:"md",children:[a.jsx(Se,{children:"RBMT 记忆指数"}),a.jsx(Ce,{children:t??"--"})]})]}),e&&a.jsxs(G,{bg:"gray.50",p:4,rounded:"md",children:[a.jsx(M,{fontWeight:"medium",mb:2,children:"评估摘要"}),a.jsx(M,{fontSize:"sm",color:"gray.600",children:e})]})]}),Et=te.memo(_t),Mt={attention:[{id:"att_1",type:"digit_span",instruction:"请重复以下数字序列",sequence:"3-7-2-9",timeLimit:30}],memory:[{id:"mem_1",type:"word_list",instruction:"记住以下词汇",words:["桌子","汽车","苹果","书本","电话"],displayTime:10,recallDelay:300}],language:[{id:"lang_1",type:"picture_naming",instruction:"说出图片中物品的名称",image:"/images/assessment/bicycle.png",correctAnswer:"自行车"}]},wt={everyday_memory:[{id:"rbmt_1",type:"appointment",instruction:"记住：明天下午3点在社区中心有健康讲座",checkTime:600}]},Ot={RBANS:Mt,RBMT:wt},je=Ot,At=()=>{const[s,t]=l.useState(null),[e,n]=l.useState(null),[o,r]=l.useState("");return a.jsxs(K,{spacing:6,align:"stretch",children:[a.jsx(W,{size:"md",children:"标准化认知评估"}),a.jsx(M,{fontSize:"sm",color:"gray.600",children:"根据 RBANS 与 RBMT 评估注意力、记忆与日常功能表现。保留每次评估的数据，用于观察认知趋势。"}),a.jsxs(we,{variant:"enclosed",colorScheme:"blue",children:[a.jsxs(Oe,{children:[a.jsx(Y,{children:"RBANS"}),a.jsx(Y,{children:"RBMT"}),a.jsx(Y,{children:"评估记录"})]}),a.jsxs(Ae,{children:[a.jsx(Z,{children:a.jsx(It,{questions:je.RBANS,onComplete:i=>{t(i)}})}),a.jsx(Z,{children:a.jsx(Rt,{questions:je.RBMT.everyday_memory,onComplete:(i,u)=>{n(i),r(u)}})}),a.jsx(Z,{children:a.jsx(Et,{rbansScore:s,rbmtScore:e,notes:o})})]})]})]})},Gt=te.memo(At);export{Gt as default};
