{"ast":null,"code":"import React,{useMemo}from'react';import{VStack,Heading,Text,Box,Stat,StatLabel,StatNumber,HStack}from'@chakra-ui/react';import ProgressChart from'../components/dashboard/ProgressChart';import NetworkVisualization from'../components/dashboard/NetworkVisualization';import SessionCalendar from'../components/dashboard/SessionCalendar';import progressJson from'../data/userProgress.json';import{buildTrendSeries,estimateImprovementRate,normalizeNetworkStrength}from'../utils/dataAnalysis';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const data=progressJson;const Progress=()=>{const trendSeries=useMemo(()=>buildTrendSeries(data),[]);const improvementRate=useMemo(()=>estimateImprovementRate(data),[]);const normalizedNodes=useMemo(()=>normalizeNetworkStrength(data.network.nodes),[]);const averageScore=Math.round(data.sessions.reduce((sum,session)=>sum+session.score,0)/data.sessions.length);const averageConcentration=Math.round(data.sessions.reduce((sum,session)=>sum+session.averageConcentration,0)/data.sessions.length*100);return/*#__PURE__*/_jsxs(VStack,{spacing:6,align:\"stretch\",children:[/*#__PURE__*/_jsx(Heading,{size:\"md\",children:\"\\u8BAD\\u7EC3\\u8FDB\\u5EA6\\u4E0E\\u8111\\u7F51\\u7EDC\"}),/*#__PURE__*/_jsx(Text,{fontSize:\"sm\",color:\"gray.600\",children:\"\\u8DDF\\u8E2A\\u8BAD\\u7EC3\\u8868\\u73B0\\u3001\\u4E13\\u6CE8\\u5EA6\\u4EE5\\u53CA\\u529F\\u80FD\\u7F51\\u7EDC\\u7684\\u53D8\\u5316\\u8D8B\\u52BF\\uFF0C\\u5E2E\\u52A9\\u8BC4\\u4F30\\u8BA4\\u77E5\\u8BAD\\u7EC3\\u6548\\u679C\\u3002\"}),/*#__PURE__*/_jsxs(HStack,{spacing:4,align:\"stretch\",children:[/*#__PURE__*/_jsxs(Stat,{bg:\"white\",p:4,rounded:\"lg\",shadow:\"sm\",children:[/*#__PURE__*/_jsx(StatLabel,{children:\"\\u5E73\\u5747\\u8BAD\\u7EC3\\u5F97\\u5206\"}),/*#__PURE__*/_jsx(StatNumber,{children:averageScore})]}),/*#__PURE__*/_jsxs(Stat,{bg:\"white\",p:4,rounded:\"lg\",shadow:\"sm\",children:[/*#__PURE__*/_jsx(StatLabel,{children:\"\\u5E73\\u5747\\u4E13\\u6CE8\\u5EA6\"}),/*#__PURE__*/_jsxs(StatNumber,{children:[averageConcentration,\"%\"]})]}),/*#__PURE__*/_jsxs(Stat,{bg:\"white\",p:4,rounded:\"lg\",shadow:\"sm\",children:[/*#__PURE__*/_jsx(StatLabel,{children:\"\\u5F97\\u5206\\u6539\\u5584\\u7387\"}),/*#__PURE__*/_jsxs(StatNumber,{children:[improvementRate,\" \\u5206/\\u5929\"]})]})]}),/*#__PURE__*/_jsxs(Box,{bg:\"white\",p:4,rounded:\"lg\",shadow:\"sm\",children:[/*#__PURE__*/_jsx(Heading,{size:\"sm\",mb:4,children:\"\\u8BAD\\u7EC3\\u8D8B\\u52BF\"}),/*#__PURE__*/_jsx(ProgressChart,{data:trendSeries})]}),/*#__PURE__*/_jsxs(Box,{bg:\"white\",p:4,rounded:\"lg\",shadow:\"sm\",children:[/*#__PURE__*/_jsx(Heading,{size:\"sm\",mb:4,children:\"\\u8111\\u7F51\\u7EDC\\u53D8\\u5316\"}),/*#__PURE__*/_jsx(NetworkVisualization,{nodes:normalizedNodes,links:data.network.links})]}),/*#__PURE__*/_jsx(Box,{bg:\"white\",p:4,rounded:\"lg\",shadow:\"sm\",children:/*#__PURE__*/_jsx(SessionCalendar,{sessions:data.sessions})})]});};export default/*#__PURE__*/React.memo(Progress);","map":{"version":3,"names":["React","useMemo","VStack","Heading","Text","Box","Stat","StatLabel","StatNumber","HStack","ProgressChart","NetworkVisualization","SessionCalendar","progressJson","buildTrendSeries","estimateImprovementRate","normalizeNetworkStrength","jsx","_jsx","jsxs","_jsxs","data","Progress","trendSeries","improvementRate","normalizedNodes","network","nodes","averageScore","Math","round","sessions","reduce","sum","session","score","length","averageConcentration","spacing","align","children","size","fontSize","color","bg","p","rounded","shadow","mb","links","memo"],"sources":["/Users/apple-dev/Desktop/test3/brain-fit/src/pages/Progress.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { VStack, Heading, Text, Box, Stat, StatLabel, StatNumber, HStack } from '@chakra-ui/react';\nimport ProgressChart from '../components/dashboard/ProgressChart';\nimport NetworkVisualization from '../components/dashboard/NetworkVisualization';\nimport SessionCalendar from '../components/dashboard/SessionCalendar';\nimport progressJson from '../data/userProgress.json';\nimport { buildTrendSeries, estimateImprovementRate, normalizeNetworkStrength } from '../utils/dataAnalysis';\n\ninterface ProgressData {\n  sessions: {\n    id: string;\n    date: string;\n    duration: number;\n    score: number;\n    averageConcentration: number;\n  }[];\n  network: {\n    nodes: {\n      id: string;\n      label: string;\n      strength: number;\n    }[];\n    links: {\n      source: string;\n      target: string;\n      value: number;\n    }[];\n  };\n}\n\nconst data = progressJson as ProgressData;\n\nconst Progress: React.FC = () => {\n  const trendSeries = useMemo(() => buildTrendSeries(data), []);\n  const improvementRate = useMemo(() => estimateImprovementRate(data), []);\n  const normalizedNodes = useMemo(() => normalizeNetworkStrength(data.network.nodes), []);\n\n  const averageScore = Math.round(\n    data.sessions.reduce((sum, session) => sum + session.score, 0) / data.sessions.length\n  );\n\n  const averageConcentration = Math.round(\n    (data.sessions.reduce((sum, session) => sum + session.averageConcentration, 0) /\n      data.sessions.length) *\n      100\n  );\n\n  return (\n    <VStack spacing={6} align=\"stretch\">\n      <Heading size=\"md\">训练进度与脑网络</Heading>\n      <Text fontSize=\"sm\" color=\"gray.600\">\n        跟踪训练表现、专注度以及功能网络的变化趋势，帮助评估认知训练效果。\n      </Text>\n\n      <HStack spacing={4} align=\"stretch\">\n        <Stat bg=\"white\" p={4} rounded=\"lg\" shadow=\"sm\">\n          <StatLabel>平均训练得分</StatLabel>\n          <StatNumber>{averageScore}</StatNumber>\n        </Stat>\n        <Stat bg=\"white\" p={4} rounded=\"lg\" shadow=\"sm\">\n          <StatLabel>平均专注度</StatLabel>\n          <StatNumber>{averageConcentration}%</StatNumber>\n        </Stat>\n        <Stat bg=\"white\" p={4} rounded=\"lg\" shadow=\"sm\">\n          <StatLabel>得分改善率</StatLabel>\n          <StatNumber>{improvementRate} 分/天</StatNumber>\n        </Stat>\n      </HStack>\n\n      <Box bg=\"white\" p={4} rounded=\"lg\" shadow=\"sm\">\n        <Heading size=\"sm\" mb={4}>\n          训练趋势\n        </Heading>\n        <ProgressChart data={trendSeries} />\n      </Box>\n\n      <Box bg=\"white\" p={4} rounded=\"lg\" shadow=\"sm\">\n        <Heading size=\"sm\" mb={4}>\n          脑网络变化\n        </Heading>\n        <NetworkVisualization nodes={normalizedNodes} links={data.network.links} />\n      </Box>\n\n      <Box bg=\"white\" p={4} rounded=\"lg\" shadow=\"sm\">\n        <SessionCalendar sessions={data.sessions} />\n      </Box>\n    </VStack>\n  );\n};\n\nexport default React.memo(Progress);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}