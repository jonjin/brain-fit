{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import{Box,VStack,HStack,Text,Image,Button,Grid,GridItem}from'@chakra-ui/react';import{motion,AnimatePresence}from'framer-motion';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MotionBox=motion(Box);const ShoppingList=_ref=>{let{items,concentration,onComplete}=_ref;const[phase,setPhase]=useState('display');const[timeRemaining,setTimeRemaining]=useState(30);const[rememberedItems,setRememberedItems]=useState([]);const visibleItems=useMemo(()=>{const shuffled=[...items].sort(()=>0.5-Math.random());return shuffled.slice(0,5);},[items]);const opacity=Math.max(0.3,concentration/100);useEffect(()=>{if(phase!=='display'){return;}const timer=window.setInterval(()=>{setTimeRemaining(prev=>{if(prev<=1){window.clearInterval(timer);setPhase('memorize');return 0;}return prev-1;});},1000);return()=>window.clearInterval(timer);},[phase]);const handleItemClick=itemId=>{setRememberedItems(prev=>prev.includes(itemId)?prev:[...prev,itemId]);};const handleSubmit=()=>{const correctCount=rememberedItems.filter(id=>visibleItems.some(item=>item.id===id)).length;const score=visibleItems.length?Math.round(correctCount/visibleItems.length*100):0;onComplete(score);};return/*#__PURE__*/_jsxs(VStack,{spacing:4,p:6,align:\"stretch\",children:[/*#__PURE__*/_jsxs(HStack,{justify:\"space-between\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"lg\",fontWeight:\"bold\",children:phase==='display'?'记住这些物品':'选择你记得的物品'}),phase==='display'&&/*#__PURE__*/_jsxs(Text,{fontSize:\"sm\",color:\"gray.500\",children:[\"\\u5269\\u4F59\\u65F6\\u95F4\\uFF1A\",timeRemaining,\" \\u79D2\"]})]}),phase==='display'?/*#__PURE__*/_jsx(Grid,{templateColumns:\"repeat(3, 1fr)\",gap:4,children:/*#__PURE__*/_jsx(AnimatePresence,{children:visibleItems.map(item=>/*#__PURE__*/_jsx(GridItem,{children:/*#__PURE__*/_jsxs(MotionBox,{bg:\"gray.100\",rounded:\"lg\",p:3,textAlign:\"center\",initial:{opacity:0,scale:0.8},animate:{opacity,scale:1},exit:{opacity:0,scale:0.8},transition:{duration:0.3},children:[/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,boxSize:\"60px\",mx:\"auto\",mb:2}),/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",fontWeight:\"medium\",children:item.name})]})},item.id))})}):/*#__PURE__*/_jsxs(VStack,{spacing:4,align:\"stretch\",children:[/*#__PURE__*/_jsx(Grid,{templateColumns:\"repeat(3, 1fr)\",gap:3,children:items.map(item=>{const selected=rememberedItems.includes(item.id);return/*#__PURE__*/_jsx(GridItem,{children:/*#__PURE__*/_jsxs(Box,{bg:selected?'green.100':'gray.100',rounded:\"lg\",p:3,textAlign:\"center\",cursor:\"pointer\",onClick:()=>handleItemClick(item.id),transition:\"transform 0.2s\",_hover:{transform:'scale(1.05)'},children:[/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,boxSize:\"50px\",mx:\"auto\",mb:2}),/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",children:item.name})]})},item.id);})}),/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",onClick:handleSubmit,children:\"\\u63D0\\u4EA4\\u7B54\\u6848\"})]})]});};export default/*#__PURE__*/React.memo(ShoppingList);","map":{"version":3,"names":["React","useEffect","useMemo","useState","Box","VStack","HStack","Text","Image","Button","Grid","GridItem","motion","AnimatePresence","jsx","_jsx","jsxs","_jsxs","MotionBox","ShoppingList","_ref","items","concentration","onComplete","phase","setPhase","timeRemaining","setTimeRemaining","rememberedItems","setRememberedItems","visibleItems","shuffled","sort","Math","random","slice","opacity","max","timer","window","setInterval","prev","clearInterval","handleItemClick","itemId","includes","handleSubmit","correctCount","filter","id","some","item","length","score","round","spacing","p","align","children","justify","fontSize","fontWeight","color","templateColumns","gap","map","bg","rounded","textAlign","initial","scale","animate","exit","transition","duration","src","image","alt","name","boxSize","mx","mb","selected","cursor","onClick","_hover","transform","colorScheme","memo"],"sources":["/Users/apple-dev/Desktop/test3/brain-fit/src/components/training/ShoppingList.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport {\n  Box,\n  VStack,\n  HStack,\n  Text,\n  Image,\n  Button,\n  Grid,\n  GridItem,\n} from '@chakra-ui/react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface ShoppingItem {\n  id: string;\n  name: string;\n  image: string;\n  category: string;\n}\n\ninterface ShoppingListProps {\n  items: ShoppingItem[];\n  concentration: number;\n  onComplete: (score: number) => void;\n}\n\nconst MotionBox = motion(Box);\n\nconst ShoppingList: React.FC<ShoppingListProps> = ({ items, concentration, onComplete }) => {\n  const [phase, setPhase] = useState<'display' | 'memorize'>('display');\n  const [timeRemaining, setTimeRemaining] = useState(30);\n  const [rememberedItems, setRememberedItems] = useState<string[]>([]);\n\n  const visibleItems = useMemo(() => {\n    const shuffled = [...items].sort(() => 0.5 - Math.random());\n    return shuffled.slice(0, 5);\n  }, [items]);\n\n  const opacity = Math.max(0.3, concentration / 100);\n\n  useEffect(() => {\n    if (phase !== 'display') {\n      return;\n    }\n\n    const timer = window.setInterval(() => {\n      setTimeRemaining((prev) => {\n        if (prev <= 1) {\n          window.clearInterval(timer);\n          setPhase('memorize');\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => window.clearInterval(timer);\n  }, [phase]);\n\n  const handleItemClick = (itemId: string) => {\n    setRememberedItems((prev) => (prev.includes(itemId) ? prev : [...prev, itemId]));\n  };\n\n  const handleSubmit = () => {\n    const correctCount = rememberedItems.filter((id) => visibleItems.some((item) => item.id === id)).length;\n    const score = visibleItems.length ? Math.round((correctCount / visibleItems.length) * 100) : 0;\n    onComplete(score);\n  };\n\n  return (\n    <VStack spacing={4} p={6} align=\"stretch\">\n      <HStack justify=\"space-between\">\n        <Text fontSize=\"lg\" fontWeight=\"bold\">\n          {phase === 'display' ? '记住这些物品' : '选择你记得的物品'}\n        </Text>\n        {phase === 'display' && (\n          <Text fontSize=\"sm\" color=\"gray.500\">\n            剩余时间：{timeRemaining} 秒\n          </Text>\n        )}\n      </HStack>\n\n      {phase === 'display' ? (\n        <Grid templateColumns=\"repeat(3, 1fr)\" gap={4}>\n          <AnimatePresence>\n            {visibleItems.map((item) => (\n              <GridItem key={item.id}>\n                <MotionBox\n                  bg=\"gray.100\"\n                  rounded=\"lg\"\n                  p={3}\n                  textAlign=\"center\"\n                  initial={{ opacity: 0, scale: 0.8 }}\n                  animate={{ opacity, scale: 1 }}\n                  exit={{ opacity: 0, scale: 0.8 }}\n                  transition={{ duration: 0.3 }}\n                >\n                  <Image src={item.image} alt={item.name} boxSize=\"60px\" mx=\"auto\" mb={2} />\n                  <Text fontSize=\"xs\" fontWeight=\"medium\">\n                    {item.name}\n                  </Text>\n                </MotionBox>\n              </GridItem>\n            ))}\n          </AnimatePresence>\n        </Grid>\n      ) : (\n        <VStack spacing={4} align=\"stretch\">\n          <Grid templateColumns=\"repeat(3, 1fr)\" gap={3}>\n            {items.map((item) => {\n              const selected = rememberedItems.includes(item.id);\n              return (\n                <GridItem key={item.id}>\n                  <Box\n                    bg={selected ? 'green.100' : 'gray.100'}\n                    rounded=\"lg\"\n                    p={3}\n                    textAlign=\"center\"\n                    cursor=\"pointer\"\n                    onClick={() => handleItemClick(item.id)}\n                    transition=\"transform 0.2s\"\n                    _hover={{ transform: 'scale(1.05)' }}\n                  >\n                    <Image src={item.image} alt={item.name} boxSize=\"50px\" mx=\"auto\" mb={2} />\n                    <Text fontSize=\"xs\">{item.name}</Text>\n                  </Box>\n                </GridItem>\n              );\n            })}\n          </Grid>\n          <Button colorScheme=\"blue\" onClick={handleSubmit}>\n            提交答案\n          </Button>\n        </VStack>\n      )}\n    </VStack>\n  );\n};\n\nexport default React.memo(ShoppingList);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}