import{o as ve,g as H,r as o,$ as K,a0 as Se,q as u,K as n,t as se,h as ce,U as pe,E as le,j as t,p as P,z as de,v as Ce,R as je,V as T,H as W,T as we,B as ne,a as ie}from"./index-CUg0-SY9.js";import{u as oe}from"./useLocalStorage-Cl9SMy0Y.js";import{c as Fe,u as De,F as M}from"./use-toast-DzNVGxy_.js";import{t as Pe,v as Re,F as B}from"./form-label-XLkUq_EI.js";import{I as re}from"./input-C-766IIq.js";function _e(c={}){const h=Fe(c),{isDisabled:s,isReadOnly:i,isRequired:f,isInvalid:r,id:x,onBlur:m,onFocus:j,"aria-describedby":k}=h,{defaultChecked:y,isChecked:v,isFocusable:S,onChange:p,isIndeterminate:a,name:R,value:O,tabIndex:V=void 0,"aria-label":$,"aria-labelledby":G,"aria-invalid":E,...he}=c,z=ve(he,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),_=H(p),J=H(m),Q=H(j),[C,N]=o.useState(!1),[F,X]=o.useState(!1),[D,w]=o.useState(!1),A=o.useRef(!1);o.useEffect(()=>Pe(e=>{A.current=e}),[]);const b=o.useRef(null),[Y,fe]=o.useState(!0),[me,I]=o.useState(!!y),U=v!==void 0,l=U?v:me,Z=o.useCallback(e=>{if(i||s){e.preventDefault();return}U||I(l?e.currentTarget.checked:a?!0:e.currentTarget.checked),_==null||_(e)},[i,s,l,U,a,_]);K(()=>{b.current&&(b.current.indeterminate=!!a)},[a]),Se(()=>{s&&N(!1)},[s,N]),K(()=>{const e=b.current;if(!(e!=null&&e.form))return;const d=()=>{I(!!y)};return e.form.addEventListener("reset",d),()=>{var g;return(g=e.form)==null?void 0:g.removeEventListener("reset",d)}},[]);const ee=s&&!S,te=o.useCallback(e=>{e.key===" "&&w(!0)},[w]),ae=o.useCallback(e=>{e.key===" "&&w(!1)},[w]);K(()=>{if(!b.current)return;b.current.checked!==l&&I(b.current.checked)},[b.current]);const be=o.useCallback((e={},d=null)=>{const g=L=>{C&&L.preventDefault(),w(!0)};return{...e,ref:d,"data-active":n(D),"data-hover":n(F),"data-checked":n(l),"data-focus":n(C),"data-focus-visible":n(C&&A.current),"data-indeterminate":n(a),"data-disabled":n(s),"data-invalid":n(r),"data-readonly":n(i),"aria-hidden":!0,onMouseDown:u(e.onMouseDown,g),onMouseUp:u(e.onMouseUp,()=>w(!1)),onMouseEnter:u(e.onMouseEnter,()=>X(!0)),onMouseLeave:u(e.onMouseLeave,()=>X(!1))}},[D,l,s,C,F,a,r,i]),ge=o.useCallback((e={},d=null)=>({...e,ref:d,"data-active":n(D),"data-hover":n(F),"data-checked":n(l),"data-focus":n(C),"data-focus-visible":n(C&&A.current),"data-indeterminate":n(a),"data-disabled":n(s),"data-invalid":n(r),"data-readonly":n(i)}),[D,l,s,C,F,a,r,i]),ke=o.useCallback((e={},d=null)=>({...z,...e,ref:se(d,g=>{g&&fe(g.tagName==="LABEL")}),onClick:u(e.onClick,()=>{var g;Y||((g=b.current)==null||g.click(),requestAnimationFrame(()=>{var L;(L=b.current)==null||L.focus({preventScroll:!0})}))}),"data-disabled":n(s),"data-checked":n(l),"data-invalid":n(r)}),[z,s,l,r,Y]),xe=o.useCallback((e={},d=null)=>({...e,ref:se(b,d),type:"checkbox",name:R,value:O,id:x,tabIndex:V,onChange:u(e.onChange,Z),onBlur:u(e.onBlur,J,()=>N(!1)),onFocus:u(e.onFocus,Q,()=>N(!0)),onKeyDown:u(e.onKeyDown,te),onKeyUp:u(e.onKeyUp,ae),required:f,checked:l,disabled:ee,readOnly:i,"aria-label":$,"aria-labelledby":G,"aria-invalid":E?!!E:r,"aria-describedby":k,"aria-disabled":s,"aria-checked":a?"mixed":l,style:Re}),[R,O,x,V,Z,J,Q,te,ae,f,l,ee,i,$,G,E,r,k,s,a]),ye=o.useCallback((e={},d=null)=>({...e,ref:d,onMouseDown:u(e.onMouseDown,Ne),"data-disabled":n(s),"data-checked":n(l),"data-invalid":n(r)}),[l,s,r]);return{state:{isInvalid:r,isFocused:C,isChecked:l,isActive:D,isHovered:F,isIndeterminate:a,isDisabled:s,isReadOnly:i,isRequired:f},getRootProps:ke,getCheckboxProps:be,getIndicatorProps:ge,getInputProps:xe,getLabelProps:ye,htmlProps:z}}function Ne(c){c.preventDefault(),c.stopPropagation()}const ue=ce(function(h,s){const{borderLeftWidth:i,borderBottomWidth:f,borderTopWidth:r,borderRightWidth:x,borderWidth:m,borderStyle:j,borderColor:k,...y}=pe("Divider",h),{className:v,orientation:S="horizontal",__css:p,...a}=le(h),R={vertical:{borderLeftWidth:i||x||m||"1px",height:"100%"},horizontal:{borderBottomWidth:f||r||m||"1px",width:"100%"}};return t.jsx(P.hr,{ref:s,"aria-orientation":S,...a,__css:{...y,border:"0",borderColor:k,borderStyle:j,...R[S],...p},className:de("chakra-divider",v)})});ue.displayName="Divider";const q=ce(function(h,s){const i=Ce("Switch",h),{spacing:f="0.5rem",children:r,...x}=le(h),{getIndicatorProps:m,getInputProps:j,getCheckboxProps:k,getRootProps:y,getLabelProps:v}=_e(x),S=o.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...i.container}),[i.container]),p=o.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...i.track}),[i.track]),a=o.useMemo(()=>({userSelect:"none",marginStart:f,...i.label}),[f,i.label]);return t.jsxs(P.label,{...y(),className:de("chakra-switch",h.className),__css:S,children:[t.jsx("input",{className:"chakra-switch__input",...j({},s)}),t.jsx(P.span,{...k(),className:"chakra-switch__track",__css:p,children:t.jsx(P.span,{__css:i.thumb,className:"chakra-switch__thumb",...m()})}),r&&t.jsx(P.span,{className:"chakra-switch__label",...v(),__css:a,children:r})]})});q.displayName="Switch";const Ie=({user:c,onProfileUpdate:h})=>{var p;const s=De(),[i,f]=oe("brainFitNotifications",!0),[r,x]=oe("brainFitOfflineMode",!0),[m,j]=o.useState((c==null?void 0:c.name)??""),[k,y]=o.useState(((p=c==null?void 0:c.age)==null?void 0:p.toString())??""),v=()=>{const a=Number(k);if(!m||Number.isNaN(a)){s({title:"请填写完整信息",status:"warning",duration:2e3});return}h({id:(c==null?void 0:c.id)??"user-001",name:m,age:a}),s({title:"资料已更新",status:"success",duration:2e3})},S=()=>{localStorage.removeItem("brainFitUserData"),s({title:"本地数据已清除",description:"重新登录或创建新档案后继续使用",status:"info",duration:3e3})};return t.jsxs(T,{spacing:6,align:"stretch",children:[t.jsx(W,{size:"md",children:"偏好设置"}),t.jsx(we,{fontSize:"sm",color:"gray.600",children:"配置账号与训练偏好，BrainFit 将根据您的设置调整认知训练节奏。"}),t.jsxs(ne,{bg:"white",p:4,rounded:"lg",shadow:"sm",children:[t.jsx(W,{size:"sm",mb:4,children:"个人资料"}),t.jsxs(T,{spacing:4,align:"stretch",children:[t.jsxs(M,{children:[t.jsx(B,{fontSize:"sm",children:"姓名"}),t.jsx(re,{value:m,onChange:a=>j(a.target.value),placeholder:"请输入姓名"})]}),t.jsxs(M,{children:[t.jsx(B,{fontSize:"sm",children:"年龄"}),t.jsx(re,{type:"number",value:k,onChange:a=>y(a.target.value),placeholder:"请输入年龄"})]}),t.jsx(ie,{colorScheme:"blue",onClick:v,children:"保存资料"})]})]}),t.jsxs(ne,{bg:"white",p:4,rounded:"lg",shadow:"sm",children:[t.jsx(W,{size:"sm",mb:4,children:"功能设置"}),t.jsxs(T,{spacing:4,align:"stretch",children:[t.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[t.jsx(B,{htmlFor:"notifications",mb:"0",fontSize:"sm",children:"训练提醒通知"}),t.jsx(q,{id:"notifications",isChecked:i,onChange:a=>f(a.target.checked)})]}),t.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[t.jsx(B,{htmlFor:"offline",mb:"0",fontSize:"sm",children:"离线模式（自动保存本地数据）"}),t.jsx(q,{id:"offline",isChecked:r,onChange:a=>x(a.target.checked)})]})]})]}),t.jsx(ue,{}),t.jsx(ie,{variant:"outline",colorScheme:"red",onClick:S,children:"清除本地数据"})]})},Ue=je.memo(Ie);export{Ue as default};
